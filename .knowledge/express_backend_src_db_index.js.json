{"is_source_file": true, "format": "JavaScript", "description": "This file manages the connection lifecycle to a MongoDB database using Mongoose. It includes functions for connecting with retries, disconnecting, and logging connection events.", "external_files": ["mongoose"], "external_methods": [], "published": ["connectMongo", "connectMongoWithRetry", "disconnectMongo", "isMongoConnected", "getLastMongoError"], "classes": [], "methods": [{"name": "attachConnectionLogs()", "description": "Sets up event listeners on the Mongoose connection to log connection status changes and errors.", "scope": "", "scopeKind": ""}, {"name": "connectMongo()", "description": "Attempts to establish a MongoDB connection using the MONGODB_URI environment variable; throws an error if URI is missing.", "scope": "", "scopeKind": ""}, {"name": "connectMongoWithRetry(initialDelayMs = 2000, maxDelayMs = 30000)", "description": "Starts a background process to connect to MongoDB with exponential backoff, retrying until successful.", "scope": "", "scopeKind": ""}, {"name": "disconnectMongo()", "description": "Disconnects from MongoDB and stops any ongoing retry attempts.", "scope": "", "scopeKind": ""}, {"name": "isMongoConnected()", "description": "Returns true if there is an active MongoDB connection.", "scope": "", "scopeKind": ""}, {"name": "getLastMongoError()", "description": "Returns the last error encountered during connection attempts.", "scope": "", "scopeKind": ""}], "calls": ["mongoose.set", "mongoose.connection.on", "mongoose.connect", "mongoose.disconnect"], "search-terms": ["MongoDB connection management", "Mongoose connection retry", "environment variable MONGODB_URI", "connection event logging"], "state": 2, "file_id": 13, "knowledge_revision": 41, "git_revision": "459ef9dae5a2d333d334984be5050db31ad036a6", "revision_history": [{"27": ""}, {"41": "459ef9dae5a2d333d334984be5050db31ad036a6"}], "ctags": [{"_type": "tag", "name": "attachConnectionLogs", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^function attachConnectionLogs() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "connectMongo", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^  connectMongo,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "connectMongo", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^async function connectMongo() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "connectMongoWithRetry", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^function connectMongoWithRetry(initialDelayMs = 2000, maxDelayMs = 30000) {$/", "language": "JavaScript", "kind": "function", "signature": "(initialDelayMs = 2000, maxDelayMs = 30000)"}, {"_type": "tag", "name": "disconnectMongo", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^async function disconnectMongo() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLastMongoError", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^function getLastMongoError() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "isMongoConnected", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^function isMongoConnected() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "lastError", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^let lastError = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "listenersAttached", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^let listenersAttached = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "mongoose", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^const mongoose = require('mongoose');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "retryTimer", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182961/express_backend/src/db/index.js", "pattern": "/^let retryTimer = null;$/", "language": "JavaScript", "kind": "variable"}], "hash": "9877c112a0239b622ce67c75417c7414", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/db/index.js", "fields": [{"name": "connectMongo,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "let lastError = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let listenersAttached = false;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let retryTimer = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}